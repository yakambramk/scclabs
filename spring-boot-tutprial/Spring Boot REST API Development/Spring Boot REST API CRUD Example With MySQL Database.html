<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <meta name="author" content="Fullstack Institute" />
    <meta name="author" content="Yakambram Kommu" />

    <style>
        .container-fluid {
            width: 70%;
            background-color: rgb(106, 51, 194);
            /* Updated color */
            padding: 0;
            margin: 0;
        }

        .topImage {
            display: flex;
            justify-content: center;
            /* Centers the image horizontally */
            align-items: center;
            /* Centers the image vertically */
        }

        .topImage img {
            max-width: 80%;
            /* Ensures the image is responsive */
            height: auto;
            /* Maintains the aspect ratio */
            border-radius: 8px;
            /* Optional: adds rounded corners to the image */
        }

        .heading {
            color: rgb(204, 145, 9);
        }

        span {
            background-color: rgb(224, 237, 235);
            color: #d73a49;
        }

        pre {
            background-color: #282c34;
            color: #edf3f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 18px;
        }

        code {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        p {
            display: block;
            margin-block-start: 1em;
            margin-block-end: 1em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            unicode-bidi: isolate;
        }

        .btn {
            transition: transform 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.1);
            /* Zoom in */
        }

        .btn:active {
            transform: scale(0.9);
            /* Zoom out on click */
        }
    </style>

</head>
        <body>
            <div class="container">
                <div class="topImage mt-2 mb-4">
                    <img src="../../assets/springboot images/hibernate,MySql,Spring Data Jpa.jpg" alt="logo" />
                </div>
            </div>
        
            <div class="container">
                <div class="heading">
                    <h3>Spring Boot REST API CRUD Example With MySQL Database</h3>
                    <h6>Author: Shiva Krishna G</h6>
                </div><br>
                <p>This tutorial will teach you how to build CRUD  REST  APIs using Spring Boot 3, Spring Data JPA, and MySQL Database.<br><br>

                    We’ll first build the APIs to create, retrieve, update and delete a user, then test them using postman.<br><br>
                   <b> Note that we are using the latest version of Spring boot which is version 3</b>.</p>
                   <div style="border-left: 8px solid rgb(237, 21, 21); height: 100px;"><br>
                    <p >Learn Spring boot at <a href="https://www.javaguides.net/p/spring-boot-tutorial.html.">https://www.javaguides.net/p/spring-boot-tutorial.html.</a></p>
                </div><br>
                <h3>1. Create a Spring Boot Application and Import in IntelliJ IDEA</h3>
                <p>You can use the Spring Initializer website (<a href="https://start.spring.io/">start.spring.io</a>) or the Spring Boot CLI to generate a new Spring Boot project with the necessary dependencies.<br><br>

                    Refer to the below screenshot to enter details while creating the spring boot application using the<a href="https://start.spring.io/"> spring initializr:</a></p>
                    <div class=" mt-2 mb-4">
                        <img src="../../assets/springboot images/1. Create a Spring Boot Application and Import it to IntelliJ IDEA.png" alt="logo" class="img-fluid" />
                    </div><br><bR>
                        <p>Click on Generate button to download the Spring boot project as a zip file. Unzip the zip file and import the Spring boot project in IntelliJ IDEA.<br><br>

                            Here is the pom.xml file for your reference:</p>
                            <code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.0.0-M4&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;net.javaguides&lt;/groupId&gt;
    &lt;artifactId&gt;springboot-restful-webservices&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;springboot-restful-webservices&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot Restful Webservices&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;false&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;</pre></code><br>
                            <h3>2. Project Structure</h3>
                            <p>Refer to the below screenshot to create a project structure or a packing structure for our Spring boot application:</p>
                            <div class=" topImage mt-2 mb-4">
                                <img src="../../assets/springboot images/2. Project Structure.png" alt="logo" class="img-fluid" />
                            </div><br><bR>
                                <h3>3. Configuring MySQL Database</h3>
                                <p>Since we’re using MySQL as our database, we need to configure the URL, username, and password so that our Spring boot can establish a connection with the database on startup. Open the<span> src/main/resources/application.properties</span> file and add the following properties to it:</p>
                                <code><pre>
spring.datasource.url=jdbc:mysql://localhost:3306/user_management
spring.datasource.username=root
spring.datasource.password=Mysql@123

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update</pre></code><br>
                                    <p>Don’t forget to change the<span> spring.datasource.username</span> and <span>spring.datasource.password</span> as per your MySQL installation. Also, create a database named <b>user_management</b> in MySQL before proceeding to the next section.<br><br>
                                        You don’t need to create any tables. The tables will automatically be created by Hibernate from the User entity that we will define in the next step. This is made possible by the property<span> spring.jpa.hibernate.ddl-auto = update</span>.</p><br>
                                        <h3>4. Create JPA Entity - User.java</h3>
                                        <p>An Entity is a plain old Java object (POJO) that represents the data you want to store. You will need to annotate the class with @Entity and define the fields of the class along with the getters and setters for each field.<br><br>

                                            Let's create a User JPA entity class with the following fields: 
                                            </p>
                                            <ul>
                                                <li>id - primary key</li>
                                                <li>firstName - user first name</li>
                                                <li>lastName - user last name</li>
                                                <li>email - user email ID</li>   
                                            </ul>
                                            <code><pre>
package net.javaguides.springboot.entity;

import jakarta.persistence.*;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Entity
@Table(name = "users")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column(nullable = false)
    private String firstName;
    @Column(nullable = false)
    private String lastName;
    @Column(nullable = false, unique = true)
    private String email;
}</pre></code><br>
                            <P>Note that we are using Lombok annotations to reduce the boilerplate code such as getter/setter methods, and constructors.<br><br>

                                We are using below JPA annotations to map an Entity with a database table:<br><br>
                                @Entity annotation is used to mark the class as a persistent Java class.<br><br>
                                @Table annotation is used to provide the details of the table that this entity will be mapped to.<br><br>
                                @Id annotation is used to define the primary key.<br><br>
                                @GeneratedValue annotation is used to define the primary key generation strategy. In the above case, we have declared the primary key to be an Auto Increment field.<br><br>
                                @Column annotation is used to define the properties of the column that will be mapped to the annotated field. You can define several properties like name, length, nullable, updateable, etc.</P>
                                <h3>5. Create Spring Data JPA Repository for User JPA Entity</h3>
                                <p>Let's create a<span> UserRepository</span> to access the User's data from the database.<br><br>
                                    Well, Spring Data JPA comes with a<span> JpaRepository</span> interface that defines methods for all the CRUD operations on the entity, and a default implementation of <span>JpaRepository</span> called<span> SimpleJpaRepository</span></p><br>
                                    <code><pre>
package net.javaguides.springboot.repository;

import net.javaguides.springboot.entity.User;
import org.springframework.data.jpa.repository.JpaRepository;

public interface UserRepository extends JpaRepository<User, Long> {
}</pre></code><br>
                <h3>6. Service Layer Implementation</h3>
                <p>This layer will contain the business logic for the API and will be used to perform CRUD operations using the Repository.</p>
<code><pre>
package net.javaguides.springboot.service;

import net.javaguides.springboot.entity.User;

import java.util.List;

public interface UserService {
    User createUser(User user);

    User getUserById(Long userId);

    List< User> getAllUsers();

    User updateUser(User user);

    void deleteUser(Long userId);
}</pre></code><br>
                        <h4>UserServiceImpl Class</h4>
                        <code><pre>
package net.javaguides.springboot.service.impl;

import lombok.AllArgsConstructor;
import net.javaguides.springboot.entity.User;
import net.javaguides.springboot.repository.UserRepository;
import net.javaguides.springboot.service.UserService;
import org.apache.logging.log4j.util.Strings;
import org.springframework.stereotype.Service;
import org.springframework.util.StringUtils;

import java.util.List;
import java.util.Objects;
import java.util.Optional;

@Service
@AllArgsConstructor
public class UserServiceImpl implements UserService {

    private UserRepository userRepository;

    @Override
    public User createUser(User user) {
        return userRepository.save(user);
    }

    @Override
    public User getUserById(Long userId) {
        Optional< User> optionalUser = userRepository.findById(userId);
        return optionalUser.get();
    }

    @Override
    public List< User> getAllUsers() {
        return userRepository.findAll();
    }

    @Override
    public User updateUser(User user) {
        User existingUser = userRepository.findById(user.getId()).get();
        existingUser.setFirstName(user.getFirstName());
        existingUser.setLastName(user.getLastName());
        existingUser.setEmail(user.getEmail());
        User updatedUser = userRepository.save(existingUser);
        return updatedUser;
    }

    @Override
    public void deleteUser(Long userId) {
        userRepository.deleteById(userId);
    }
}</pre></code><br>
                    <h3>7. Creating UserController - Building CRUD Rest APIs</h3>
            <p>The controller is responsible for handling incoming HTTP requests and returning the appropriate response. You will need to define the endpoints of the API and map them to the appropriate methods in the Service layer.<br><br>

                Let's create the  REST  APIs for creating, retrieving, updating, and deleting a User:</p>

                <code><pre>
package net.javaguides.springboot.controller;

import lombok.AllArgsConstructor;
import net.javaguides.springboot.entity.User;
import net.javaguides.springboot.service.UserService;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@AllArgsConstructor
@RequestMapping("api/users")
public class UserController {

    private UserService userService;

    // build create User REST API
    @PostMapping
    public ResponseEntity< User> createUser(@RequestBody User user){
        User savedUser = userService.createUser(user);
        return new ResponseEntity< >(savedUser, HttpStatus.CREATED);
    }

    // build get user by id REST API
    // http://localhost:8080/api/users/1
    @GetMapping("{id}")
    public ResponseEntity< User> getUserById(@PathVariable("id") Long userId){
        User user = userService.getUserById(userId);
        return new ResponseEntity< >(user, HttpStatus.OK);
    }

    // Build Get All Users REST API
    // http://localhost:8080/api/users
    @GetMapping
    public ResponseEntity< List< User>> getAllUsers(){
        List< User> users = userService.getAllUsers();
        return new ResponseEntity<>(users, HttpStatus.OK);
    }

    // Build Update User REST API
    @PutMapping("{id}")
    // http://localhost:8080/api/users/1
    public ResponseEntity< User> updateUser(@PathVariable("id") Long userId,
                                           @RequestBody User user){
        user.setId(userId);
        User updatedUser = userService.updateUser(user);
        return new ResponseEntity< >(updatedUser, HttpStatus.OK);
    }

    // Build Delete User REST API
    @DeleteMapping("{id}")
    public ResponseEntity< String> deleteUser(@PathVariable("id") Long userId){
        userService.deleteUser(userId);
        return new ResponseEntity< >("User successfully deleted!", HttpStatus.OK);
    }
}</pre></code><br>
            <h3>8. Running the Application</h3>
            <p>We have successfully developed all the CRUD Rest APIs for the User model. Now it's time to deploy our application in a servlet container(embedded tomcat). <br><br>
                Two ways we can start the standalone Spring boot application.<br><br> 
                1. From the root directory of the application and type the following command to run it -</p>
                <code><pre>
$ mvn spring-boot:run </pre></code>
                    <p>2. From your IDE, run the SpringbootRestfulWebservicesApplication.main() method as a standalone Java class that will start the embedded Tomcat server on port 8080 and point the browser to <a href="http://localhost:8080/"> http://localhost:8080/</a></p><br>
                    <h3>9. Test Spring Boot CRUD REST APIs using Postman Client</h3>
                    <h4>Create User REST API:</h4>
                    <div class=" topImage mt-2 mb-4">
                        <img src="../../assets/springboot images/create user rest api.png" alt="logo" class="img-fluid" />
                    </div><br><bR>
                        <h4>Get Single User REST API:</h4>
                        <div class=" topImage mt-2 mb-4">
                            <img src="../../assets/springboot images/get single rest api.png" alt="logo" class="img-fluid" />
                        </div><br><bR>
                            <h4>Update User REST API:</h4>
                            <div class=" topImage mt-2 mb-4">
                                <img src="../../assets/springboot images/update user rest api.png" alt="logo" class="img-fluid" />
                            </div><br><bR>
                                <h4>Get All Users REST API:</h4>
                                <div class=" topImage mt-2 mb-4">
                                    <img src="../../assets/springboot images/get all user rest api.png" alt="logo" class="img-fluid" />
                                </div><br><bR>
                            <h4>Delete User REST API:</h4>
                            <div class=" topImage mt-2 mb-4">
                                <img src="../../assets/springboot images/delete user rest pai.png" alt="logo" class="img-fluid" />
                            </div><br><bR>
                        <h3>10. Conclusion</h3>
                                <p>Congratulations guys! We successfully built a Restful CRUD API using Spring Boot 3, Spring Data JPA, and MySQL database.</p>
                        <h3>Related Spring and Spring Boot Tutorials/Guides:</h3>
                        <p>
                            <button type="button" class="btn btn-outline-primary">Spring Boot Tutorials [500+]s</button>
                            <button type="button" class="btn btn-outline-secondary">Spring Boot Testing Tutorial</button>
                            <button type="button" class="btn btn-outline-success">Spring Boot Microservice Tutorial</button>
                            <button type="button" class="btn btn-outline-danger">Spring Boot Kafka Microservices </button>
                            <button type="button" class="btn btn-outline-warning">Spring Boot + Apache Kafka Tutorial</button>
                            <button type="button" class="btn btn-outline-info">Spring Core Tutorial</button>
                            <button type="button" class="btn btn-outline-primary">Spring MVC Tutorial </button>
                            <button type="button" class="btn btn-outline-secondary">Spring Data JPA Tutorial</button>
                            <button type="button" class="btn btn-outline-success">Spring Framework for Beginners</button>
                            <button type="button" class="btn btn-outline-danger">Spring AOP Tutorial</button>
                            <button type="button" class="btn btn-outline-warning">Spring Security Tutorial</button>
                            <button type="button" class="btn btn-outline-info">Spring Exceptions Tutorial</button>
                            <button type="button" class="btn btn-outline-primary">Spring Boot Interview Questions</button>
                            <button type="button" class="btn btn-outline-dark">Spring Boot Microservices Interview Questions</button>
                            <button type="button" class="btn btn-outline-primary">Apache Kafka Tutorials </button>
                            <button type="button" class="btn btn-outline-secondary">Docker Tutorials and Guides</button>
                            <button type="button" class="btn btn-outline-success">Spring Boot RabbitMQ Tutorials</button>
                            <button type="button" class="btn btn-outline-danger">Angular CRUD Example with Spring Boot </button>
                            <button type="button" class="btn btn-outline-warning">Spring Boot + Angular 12 CRUD Full Stack</button>
                            <button type="button" class="btn btn-outline-info">Spring Boot + Angular 8 CRUD Full Stack</button>
                            <button type="button" class="btn btn-outline-danger">Spring Boot + Angular 10 CRUD Full Stack </button>
                            <button type="button" class="btn btn-outline-primary">React JS ( React Hooks) + Spring Boot</button>
                            <button type="button" class="btn btn-outline-secondary">Spring Boot + React JS CRUD Full Stack</button>
                            <button type="button" class="btn btn-outline-success">Spring Boot Thymeleaf CRUD Full Stack </button>
                            <button type="button" class="btn btn-outline-danger">Spring Boot User Registration and Login</button>
                            <button type="button" class="btn btn-outline-warning">Node Js + Express + MongoDB CRUDVue</button>
                            <button type="button" class="btn btn-outline-info">JS + Spring Boot REST API Tutorial</button>
                        </p>



            </div>
        </body>
</html>