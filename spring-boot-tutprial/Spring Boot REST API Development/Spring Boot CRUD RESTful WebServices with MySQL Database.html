<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <meta name="author" content="Fullstack Institute" />
    <meta name="author" content="Yakambram Kommu" />

    <style>
        .container-fluid {
            width: 70%;
            background-color: rgb(106, 51, 194);
            /* Updated color */
            padding: 0;
            margin: 0;
        }

        .topImage {
            display: flex;
            justify-content: center;
            /* Centers the image horizontally */
            align-items: center;
            /* Centers the image vertically */
        }

        .topImage img {
            max-width: 80%;
            /* Ensures the image is responsive */
            height: auto;
            /* Maintains the aspect ratio */
            border-radius: 8px;
            /* Optional: adds rounded corners to the image */
        }

        .heading {
            color: rgb(204, 145, 9);
        }

        span {
            background-color: rgb(224, 237, 235);
            color: #d73a49;
        }

        pre {
            background-color: #282c34;
            color: #edf3f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 18px;
        }

        code {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        p {
            display: block;
            margin-block-start: 1em;
            margin-block-end: 1em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            unicode-bidi: isolate;
        }

        .btn {
            transition: transform 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.1);
            /* Zoom in */
        }

        .btn:active {
            transform: scale(0.9);
            /* Zoom out on click */
        }
    </style>

</head>
        <body>
            <div class="container">
                <div class="topImage mt-2 mb-4">
                    <img src="../../assets/springboot images/Spring boot Hibernanate MySql CURD rest api.jpg" alt="logo" />
                </div>
            </div>
        
            <div class="container">
                <div class="heading">
                    <h3>Spring Boot 3, MySQL, Spring Data JPA, Hibernate CRUD REST API Tutorial [2024]</h3>
                    <h6>Author: Sai k</h6>
                </div><br>
                <p>In this tutorial, we will learn how to build CRUD  RESTful  API using Spring Boot 3, Spring Data JPA (Hibernate), and MySQL database. <br><br>

                    CRUD stands for "create, read, update, and delete," which are the four basic functions of persistent storage. Spring Boot is a Java-based framework used to build web applications and RESTful APIs. Together, Spring Boot and CRUD can be used to quickly develop a RESTful API that can create, read, update, and delete data in a database.</p>
                    <div style="border-left: 8px solid rgb(237, 21, 21); height: 100px;"><br>
                        <p > Learn complete Spring boot at <a href="http://127.0.0.1:5500/spring_boot_tutorial.html">Learn and Master Spring Boot</a></p>
                    </div><br>
                    <h3>Spring Boot Project Architecture</h3>
                    <p>We are going to use three-layer architecture in our Spring boot project:</p>

                    <div class=" mt-2 mb-4">
                        <img src="../../assets/springboot images/Spring Boot Project Structure.PNG" alt="logo" class="img-fluid" />
                    </div><br>
                    <h3>Tools and Technologies Used:</h3>
                    <ul>
                        <li> Spring Boot 3.0</li>
                        <li>Java 17</li>
                        <li>Spring Data JPA</li>
                        <li>Hibernate</li>
                        <li>MySQL Database</li>
                        <li>Maven</li>
                        <li>Postman</li>
                    </ul>
                    <h3>1. Create and Setup Spring Boot Project in IntelliJ</h3>
                    <p>Spring Boot provides a web tool called <a href="https://start.spring.io/">Spring Initializer</a> to create and bootstrap Spring boot applications quickly. Just go to <a href="https://start.spring.io/">https://start.spring.io/</a>  and generate a new spring boot project. <br><br>

                        Refer to this screenshot to enter the details to create the Spring Boot project:</p>
                        <div class=" mt-2 mb-4">
                            <img src="../../assets/springboot images/spring_initializrr.png" alt="logo" class="img-fluid" />
                        </div><br>
                        <p>Here is the pom.xml file for your reference:</p>
                        <code><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.0.0&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;net.javaguides&lt;/groupId&gt;
    &lt;artifactId&gt;springboot-restful-webservices&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;springboot-restful-webservices&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot Restful Webservices&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;</pre></code><br>
                                <h4>Project Structure</h4>
                                <p>Refer to this screenshot to create a project structure:</p>
                                <div class=" mt-2 mb-4">
                                    <img src="../../assets/springboot images/Project-Structure.png" alt="logo" class="img-fluid" />
                                </div><br>
                                <h3>Configure MySQL Database</h3>
                                <p>Let's first create a database, go to MySQL workbench, and use the below SQL query to create a new database:</p>
                                <code><pre>create database user_management</pre></code><br>
                                <p>Next, open the application.properties file and add the following properties to it.</p>
                                <code><pre>
spring.datasource.url=jdbc:mysql://localhost:3306/user_management
spring.datasource.username=root
spring.datasource.password=Mysql@123

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update</pre></code><br>
                                    <p>Make sure that you change the<span> spring.datasource.username</span> &  <span> spring.datasource.password</span> properties as per your MySQL installation. <br><br>

                                        In the above properties file, the last two properties are for Hibernate. <b>Spring Boot uses Hibernate as the default JPA implementation</b>.<br><br>
                                        
                                        The property<span> spring.jpa.hibernate.ddl-auto</span> is used for database initialization. I’ve used the value “update” for this property to create the database tables automatically.</p>
                                        <h3>Create User JPA Entity</h3>
                                        <p>An Entity is a plain old Java object (POJO) that represents the data you want to store. You will need to annotate the class with @Entity and define the fields of the class along with the getters and setters for each field. <br><br>

                                            Let's create a User class and add the following content to it:</p>
                                            <code><pre>
package net.javaguides.springboot.entity;

import jakarta.persistence.*;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Entity
@Table(name = "users")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column(nullable = false)
    private String firstName;
    @Column(nullable = false)
    private String lastName;
    @Column(nullable = false, unique = true)
    private String email;
}</pre></code><br>
                    <p>Note that we are using Lombok annotations to reduce the boilerplate code (getters/setters).</p>
                    <h3>Create Spring Data JPA Repository - UserRepository</h3>
                    <p>A repository is an interface that defines the methods for performing CRUD operations on the Entity. Spring Data JPA will automatically create the implementation for the Repository interface. <br><br>

                        Let's create a <span> UserRepository</span> interface that extends<span> JpaRepository</span>:</p>

<code><pre>
package net.javaguides.springboot.repository;

import net.javaguides.springboot.entity.User;
import org.springframework.data.jpa.repository.JpaRepository;

public interface UserRepository extends JpaRepository<User, Long> {

}</pre></code><br>
                    <p>Note that we do not need to add @Repository annotation because Spring Data JPA internally takes care of it.</p>
                    <h3>Create Service Layer</h3>
                    <p>This layer will contain the business logic for the API and will be used to perform CRUD operations using the Repository. <br><br>

                        Let's implement the service layer, we will first create an interface and then its implementation class.</p>
                        <h4>Service Interface</h4>
                        <p>Let's create an UserService interface and declare the following CRUD methods:</p>
<code><pre>
package net.javaguides.springboot.service;

import net.javaguides.springboot.entity.User;

import java.util.List;

public interface UserService {
    User createUser(User user);

    User getUserById(Long userId);

    List< User> getAllUsers();

    User updateUser(User user);

    void deleteUser(Long userId);
}</pre></code><br>
                <h4>UserServiceImpl</h4>
                <p>Let's create UserServiceImpl class that implements UserService interface methods:</p>
<code><pre>
package net.javaguides.springboot.service.impl;

import lombok.AllArgsConstructor;
import net.javaguides.springboot.entity.User;
import net.javaguides.springboot.repository.UserRepository;
import net.javaguides.springboot.service.UserService;
import org.apache.logging.log4j.util.Strings;
import org.springframework.stereotype.Service;
import org.springframework.util.StringUtils;

import java.util.List;
import java.util.Objects;
import java.util.Optional;

@Service
@AllArgsConstructor
public class UserServiceImpl implements UserService {

    private UserRepository userRepository;

    @Override
    public User createUser(User user) {
        return userRepository.save(user);
    }

    @Override
    public User getUserById(Long userId) {
        Optional< User> optionalUser = userRepository.findById(userId);
        return optionalUser.get();
    }

    @Override
    public List< User> getAllUsers() {
        return userRepository.findAll();
    }

    @Override
    public User updateUser(User user) {
        User existingUser = userRepository.findById(user.getId()).get();
        existingUser.setFirstName(user.getFirstName());
        existingUser.setLastName(user.getLastName());
        existingUser.setEmail(user.getEmail());
        User updatedUser = userRepository.save(existingUser);
        return updatedUser;
    }

    @Override
    public void deleteUser(Long userId) {
        userRepository.deleteById(userId);
    }
}</pre></code><br>
                        <h3>Create Controller Layer - UserController</h3>
                        <p>We’ll now create the  REST  APIs for creating, retrieving, updating, and deleting a User resource. <br><br>

                            Let's create UserController class and let's build CRUD REST APIs for the User resource:</p>

<code><pre>
package net.javaguides.springboot.controller;

import lombok.AllArgsConstructor;
import net.javaguides.springboot.entity.User;
import net.javaguides.springboot.service.UserService;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@AllArgsConstructor
@RequestMapping("api/users")
public class UserController {

    private UserService userService;

    // build create User REST API
    @PostMapping
    public ResponseEntity < User> createUser(@RequestBody User user){
        User savedUser = userService.createUser(user);
        return new ResponseEntity< >(savedUser, HttpStatus.CREATED);
    }

    // build get user by id REST API
    // http://localhost:8080/api/users/1
    @GetMapping("{id}")
    public ResponseEntity< User> getUserById(@PathVariable("id") Long userId){
        User user = userService.getUserById(userId);
        return new ResponseEntity< >(user, HttpStatus.OK);
    }

    // Build Get All Users REST API
    // http://localhost:8080/api/users
    @GetMapping
    public ResponseEntity< List< User>> getAllUsers(){
        List< User> users = userService.getAllUsers();
        return new ResponseEntity< >(users, HttpStatus.OK);
    }

    // Build Update User REST API
    @PutMapping("{id}")
    // http://localhost:8080/api/users/1
    public ResponseEntity< User> updateUser(@PathVariable("id") Long userId,
                                           @RequestBody User user){
        user.setId(userId);
        User updatedUser = userService.updateUser(user);
        return new ResponseEntity< >(updatedUser, HttpStatus.OK);
    }

    // Build Delete User REST API
    @DeleteMapping("{id}")
    public ResponseEntity< String> deleteUser(@PathVariable("id") Long userId){
        userService.deleteUser(userId);
        return new ResponseEntity< >("User successfully deleted!", HttpStatus.OK);
    }
}</pre></code><br>
                <h3>Running Spring Boot Application</h3>
                <h4>Run the spring boot application from IDE:</h4>
                <p>From your IDE, run the<span> SpringbootRestfulWebservicesApplication.main()</span> method as a standalone Java class that will start the embedded Tomcat server on port 8080 and point the browser to <a href="http://localhost:8080/">http://localhost:8080/</a> .</p>
                <h5>Run the spring boot application using the command line:</h5>
                <p>Just go to the root directory of the application and type the following command to run it -</p>
<code><pre>$ mvn spring-boot:run</pre></code>

                    <p>The application will start at Spring Boot’s default tomcat port 8080.</p>

                    <h3>Test CRUD RESTful WebServices using Postman Client</h3>
                    <h4>Create User REST API:</h4>
                    <p><b>Request URL:</b><a href="http://localhost:8080/api/users">http://localhost:8080/api/users</a> 
                       <b> HTTP Method:</b> POST
                       <b> Request Body:</b></p>
                       <code><pre>
{
    "firstName": "umesh",
    "lastName":"fadatare",
    "email": "umesh@gmail.com"
}</pre></code><br>
                <h5>Refer to this screenshot to test Create User REST API:</h5>
                <div class=" mt-2 mb-4">
                    <img src="../../assets/springboot images/create user rest api.png" alt="logo" class="img-fluid" />
                </div><br>
                <h4>Get User REST API:</h4>
                <p><b>Request URL:</b> http://localhost:8080/api/users/1 <br>
                   <b> HTTP Method:</b> GET <br><br>
                    
                   <b> Refer to this screenshot to test GET User REST API:</b></p>
                   <div class=" mt-2 mb-4">
                    <img src="../../assets/springboot images/get single rest api.png" alt="logo" class="img-fluid" />
                </div><br>
                <h4>Update User REST API:</h4>
                <p><b>Request URL:</b> http://localhost:8080/api/users/1 <br>
                    <b>HTTP Method:</b> PUT <br><br>
                   <b>Request Body:</b></p>
                   <code><pre>
{
    "firstName": "ram",
    "lastName":"fadatare",
    "email": "ram@gmail.com"
}</pre></code><br>
    <h5>Refer to this screenshot to test the Update User REST API:</h5>
                <div class=" mt-2 mb-4">
                    <img src="../../assets/springboot images/update user rest api.png" alt="logo" class="img-fluid" />
                </div><br>

                    <h3>Get All Users REST API:</h3>
                    <p><b>Request URL:</b> http://localhost:8080/api/users <br>
                       <b> HTTP Method:</b> GET <br><br>
                        
                        <b>Refer to this screenshot to test GET All User REST API:</b></p>
                        <div class=" mt-2 mb-4">
                            <img src="../../assets/springboot images/get all user rest api.png" alt="logo" class="img-fluid" />
                        </div><br>
                        

                        <h3>DELETE User REST API:</h3>
                        <p><b>Request URL:</b> http://localhost:8080/api/users/1 <br>
                            <b>HTTP Method:</b> DELETE <br><br>
                            
                            <b>Refer to this screenshot to test Delete User REST API:</b></p>
                            <div class=" mt-2 mb-4">
                                <img src="../../assets/springboot images/delete user rest pai.png" alt="logo" class="img-fluid" />
                            </div><br>
                            <h3>Source Code on GitHub</h3>
                            <p>The source code of this tutorial is available on my GitHub repository at <a href="https://github.com/RameshMF/springboot-docker-course/tree/main/springboot-restful-webservices">Spring Boot CRUD RESTful WebServices</a></p>

                            <h3>Conclusion</h3>
                            <p>In this tutorial, we have created a Spring boot project and built CRUD RESTful Webservices using <a href="http://127.0.0.1:5500/spring_boot_tutorial.html"> Spring Boot 3, Spring Data JPA (Hibernate)</a>, and MySQL database.</p>



            </div>  
        </body>
</html>