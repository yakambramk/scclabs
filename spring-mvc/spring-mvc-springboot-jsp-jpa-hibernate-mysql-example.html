<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring MVC + Spring Boot2 + JSP + JPA + Hibernate 5 + MySQL Example</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            color: #333;
            overflow: auto;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
        }

        h1,
        h2 {
            margin: 20px 0;
            font-weight: bold;
        }

        h1 {
            color: red;
            font-size: 2rem;
        }

        h2 {
            font-size: 1.5rem;
        }

        p,
        li {
            letter-spacing: 0.5px;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        a {
            text-decoration: none;
            cursor: pointer;
            color: #3D85C6;
            line-height: 2.5;
            font-weight: bold;
        }

        a:hover {
            color: red;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 20px 0;
        }

        pre {
            background-color: #f6f8fa;
            border-radius: 3px;
            box-sizing: border-box;
            font-family: Consolas, monospace;
            font-size: 13.6px;
            line-height: 1.45;
            padding: 16px;
            overflow: auto;
            word-wrap: break-word;
        }

        @media (max-width: 1200px) {
            .container {
                padding: 0 15px;
            }

            h1 {
                font-size: 1.8rem;
            }

            h2 {
                font-size: 1.4rem;
            }
        }

        @media (max-width: 992px) {
            .container {
                padding: 0 10px;
            }

            h1 {
                font-size: 1.6rem;
            }

            h2 {
                font-size: 1.3rem;
            }

            p,
            li {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 10px;
            }

            h1 {
                font-size: 1.4rem;
            }

            h2 {
                font-size: 1.2rem;
            }

            p,
            li {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 5px;
            }

            h1 {
                font-size: 1.2rem;
            }

            h2 {
                font-size: 1.1rem;
            }

            p,
            li {
                font-size: 0.85rem;
            }

            a {
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Spring MVC + Spring Boot2 + JSP + JPA + Hibernate 5 + MySQL Example</h1>
        <p>In this article, we will learn how to develop a Spring MVC web application using Spring MVC, Spring boot 2,
            JSP, Hibernate 5, JPA, Maven, and MySQL database.</p>
        <h2>Table of Contents</h2>
        <pre>
                <ol>
                    <li><b>What we’ll build </b></li>
                        <li><b>  Tools and Technologies Used</b></li>
                            <li><b>  Creating and Importing a Project</b></li>
                                <li><b> Packaging Structure</b></li>
                                    <li><b>  The pom.xml File</b></li>
                                        <li><b> The Springboot2WebappJspApplication.java File</b></li>
                                            <li><b> Create a JPA Entity called User.java</b></li>
                                                <li><b> Create Spring Data JPA Repository - UserRepository.java</b></li>
                                                    <li><b> Create Spring Controller - UserController.java</b></li>
                                                        <li><b> Configuring MySQL Database and JSP View Resolver</b></li>
                                                            <li><b> Insert SQL Script</b></li>
                                                                <li><b> Create a JSP View - users.jsp</b></li>
                                                                    <li><b> Running the Application</b></li>
                                                                        <li><b> Source code on GitHub</b></li>
                </ol>
            </pre>
        <h2>1. What we’ll build</h2>
        <p>We are building a simple Spring MVC web application and JSP as a view. We will create JSP page which displays
            a list of users from MySQL database.</p>
        <h2>2. Tools and Technologies Used</h2>
        <ul>
            <li><b>Spring Boot</b> - 2.0.4.RELEASE</li>
            <li><b> JDK </b>- 1.8 or later</li>
            <li><b> Spring Framework </b>- 5.0.8 RELEASE</li>
            <li><b> Hibernate </b>- 5.2.17.Final</li>
            <li><b> Maven</b> - 3.2+</li>
            <li><b> IDE</b> - Eclipse or Spring Tool Suite (STS)</li>
            <li><b> Tomcat </b>- 8.5+</li>
            <li><b> Spring Data JPA</b> - 2.0.10 RELEASE</li>
            <li><b> JSP</b></li>
            <li><b> Bootstrap </b>- 3+</li>
        </ul>
        <h2>3. Creating and Importing a Project</h2>
        <p>There are many ways to create a Spring Boot application. The simplest way is to use Spring Initializr at <a
                href="http://start.spring.io/">http://start.spring.io/</a>, which is an online Spring Boot application
            generator.</p>
        <img src="/assets/spring-mvc-image/spring-initizr.PNG" alt="" class="image-fluid">
        <p>Look at the above diagram, we have specified following details:</p>
        <ul>
            <li><b>Generate:</b> Maven Project</li>
            <li><b> Java Version:</b> 1.8 (Default)</li>
            <li><b> Spring Boot:</b>2.0.4</li>
            <li><b> Group:</b> net.guides.springboot2</li>
            <li><b> Artifact: </b>springboot2-webapp-jsp</li>
            <li><b> Name:</b> springboot2-webapp-jsp</li>
            <li><b> Package Name : </b>net.guides.springboot2.springboot2webappjsp</li>
            <li><b> Packaging:</b> jar (This is the default value)</li>
            <li><b> Dependencies:</b> Web, JPA, MySQL, DevTools</li>
        </ul>
        <p>Once, all the details are entered, click on Generate Project button will generate a spring boot project and
            downloads it. Next, Unzip the downloaded zip file and import it into your favorite IDE.</p>
        <h2>4. Packaging Structure</h2>
        <img src="/assets/spring-mvc-image/packaging-structure.PNG" alt="" class="image-fluid">
        <p>Once we will import generated spring boot project in IDE, we will see some auto-generated files.</p>
        <ol>
            <li>pom.xml</li>
            <li> resources</li>
            <li> Springboot2WebappJspApplication.java</li>
            <li> Springboot2WebappJspApplicationTests.java</li>
        </ol>
        <h2>5. The pom.xml File</h2>
        <pre>
            &lt;?xml version="1.0" encoding="UTF-8"?&gt;
            &lt;project xmlns="http://maven.apache.org/POM/4.0.0"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
                    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
            
                &lt;groupId&gt;net.guides.springboot2&lt;/groupId&gt;
                &lt;artifactId&gt;springboot2-webapp-jsp&lt;/artifactId&gt;
                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
                &lt;packaging&gt;jar&lt;/packaging&gt;
            
                &lt;name&gt;springboot2-webapp-jsp&lt;/name&gt;
                &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;
            
                &lt;parent&gt;
                     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                     &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
                     &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;
                     &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;
                &lt;/parent&gt;
            
                &lt;properties&gt;
                   &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
                   &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
                   &lt;java.version&gt;1.8&lt;/java.version&gt;
                &lt;/properties&gt;
            
                &lt;dependencies&gt;
                    &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
                    &lt;/dependency&gt;
            
                    &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
                    &lt;/dependency&gt;
            
                    &lt;dependency&gt;
                         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                         &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
                         &lt;scope&gt;runtime&lt;/scope&gt;
                    &lt;/dependency&gt;
                    &lt;dependency&gt;
                        &lt;groupId&gt;mysql&lt;/groupId&gt;
                        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
                        &lt;scope&gt;runtime&lt;/scope&gt;
                    &lt;/dependency&gt;
                    &lt;dependency&gt;
                         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
                         &lt;scope&gt;test&lt;/scope&gt;
                    &lt;/dependency&gt;
            
                    &lt;!-- JSTL for JSP --&gt;
                   &lt;dependency&gt;
                        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
                        &lt;artifactId&gt;jstl&lt;/artifactId&gt;
                   &lt;/dependency&gt;
            
                   &lt;!-- Need this to compile JSP --&gt;
                   &lt;dependency&gt;
                      &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;
                      &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;
                      &lt;scope&gt;provided&lt;/scope&gt;
                   &lt;/dependency&gt;
            
                   &lt;!-- Optional, test for static content, bootstrap CSS --&gt;
                  &lt;dependency&gt;
                      &lt;groupId&gt;org.webjars&lt;/groupId&gt;
                      &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;
                      &lt;version&gt;3.3.7&lt;/version&gt;
                  &lt;/dependency&gt;
               &lt;/dependencies&gt;
            
               &lt;build&gt;
                   &lt;plugins&gt;
                      &lt;plugin&gt;
                         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                         &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                     &lt;/plugin&gt;
                  &lt;/plugins&gt;
               &lt;/build&gt;
            &lt;/project&gt;
            </pre>
        <h2>WebJars</h2>
        <p>Note that we have added <b>Twitter Bootstrap </b>to pom.xml.</p>
        <pre>
    &lt;!-- Optional, test for static content, bootstrap CSS --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.webjars&lt;/groupId&gt;
        &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;
        &lt;version&gt;3.3.7&lt;/version&gt;
    &lt;/dependency&gt;
    </pre>
        <p>WebJars are client-side dependencies packaged into JAR archive files. They work with most JVM containers and
            web frameworks.</p>
        <p><b>Here are a few interesting advantages of WebJars:</b></p>
        <p>1. We can explicitly and easily manage the client-side dependencies in JVM-based web applications</p>
        <p> 2. We can use them with any commonly used build tool, eg: Maven, Gradle, etc</p>
        <p> 3. WebJars behave like any other Maven dependency – which means that we get transitive dependencies as well
        </p>
        <h2>JSP Support</h2>
        <p>We want to use <b>JSP</b> as the view. Default embedded servlet container for Spring Boot Starter Web is
            tomcat. To
            enable support for JSP’s, we would need to add a dependency on <b>tomcat-embed-jasper</b>.</p>
        <pre> &lt;dependency>
    &lt;groupId>org.apache.tomcat.embed&lt;/groupId>
    &lt;artifactId>tomcat-embed-jasper&lt;/artifactId>
    &lt;scope>provided&lt;/scope>
    &lt;/dependency>
</pre>
        <h2>6. The Springboot2WebappJspApplication.java File</h2>
        <p>This class provides an entry point with the <b>public static void main(String[] args)</b> method, which you
            can run to start the application.</p>
        <p> Note that <b>SpringBootServletInitializer</b> run a <b>SpringApplication</b> from a traditional WAR
            deployment</p>
        <pre>package net.guides.springboot2.springboot2webappjsp;

        import org.springframework.boot.SpringApplication;
        import org.springframework.boot.autoconfigure.SpringBootApplication;
        import org.springframework.boot.builder.SpringApplicationBuilder;
        import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;
        
        @SpringBootApplication
        public class Springboot2WebappJspApplication extends SpringBootServletInitializer{
        
            @Override
            protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
                return application.sources(Springboot2WebappJspApplication.class);
            }
         
            public static void main(String[] args) {
                SpringApplication.run(Springboot2WebappJspApplication.class, args);
            }
        }</pre>
        <h2>7. Create a JPA Entity - User.java</h2>
        <pre>package net.guides.springboot2.springboot2webappjsp.domain;

    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import javax.persistence.GenerationType;
    import javax.persistence.Id;
    import javax.persistence.Table;
    
    @Entity
    @Table(name = "user")
    public class User
    {
        @Id 
        @GeneratedValue(strategy=GenerationType.AUTO)
        private Integer id;
        private String name;
     
        public User()
        {
        }
    
        public User(Integer id, String name)
        {
            this.id = id;
            this.name = name;
        }
    
        public Integer getId()
        {  
            return id;
        }
    
        public void setId(Integer id)
        {
            this.id = id;
        }
    
        public String getName()
        {
            return name;
        }
    
        public void setName(String name)
        {
            this.name = name;
        }
    }</pre>
        <h2>8. Create Spring Data JPA Repository - UserRepository.java</h2>
        <pre>package net.guides.springboot2.springboot2webappjsp.repositories;

    import org.springframework.data.jpa.repository.JpaRepository;
    
    import net.guides.springboot2.springboot2webappjsp.domain.User;
    
    public interface UserRepository extends JpaRepository<User, Integer>
    {
    
    }</pre>
        <h2>9. Create Spring Controller - UserController.java</h2>
        <pre>package net.guides.springboot2.springboot2webappjsp.controllers;

    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Controller;
    import org.springframework.ui.Model;
    import org.springframework.web.bind.annotation.RequestMapping;
    
    import net.guides.springboot2.springboot2webappjsp.repositories.UserRepository;
    
    @Controller
    public class UserController {
        @Autowired
        UserRepository userRepo;
    
        @RequestMapping("/users")
        public String home(Model model) {
             model.addAttribute("users", userRepo.findAll());
             return "index";
        }
    }</pre>
        <h2>10. Configuring MySQL Database and JSP View Resolver</h2>
        <p><b>Configuring a View Resolver</b></p>
        <p>We would have our jsp’s in <b>/WEB-INF/jsp/</b>. We would need to configure the view resolver with the prefix
            and suffix.</p>
        <pre>spring.mvc.view.prefix=/WEB-INF/jsp/
    spring.mvc.view.suffix=.jsp</pre>
        <h2>Configuring the MySQL database</h2>
        <p>Configure <b>application.properties</b> to connect to your <b>MySQL</b> database. Let's open an
            <b>application.properties</b> file and add following database configuration to it.
        </p>
        <pre>spring.mvc.view.prefix: /WEB-INF/jsp/
    spring.mvc.view.suffix: .jsp
    
    logging.level.org.springframework=INFO
    
    ################### DataSource Configuration ##########################
    spring.datasource.driver-class-name=com.mysql.jdbc.Driver
    spring.datasource.url=jdbc:mysql://localhost:3306/users_database
    spring.datasource.username=root
    spring.datasource.password=root
    
    ################### Hibernate Configuration ##########################
    
    spring.jpa.hibernate.ddl-auto=update
    spring.jpa.show-sql=true</pre>
        <h2>11. Insert SQL Script</h2>
        <p>Once you will run this application will create <b>users</b> table in a database and use below insert SQL
            script to populate a few records in the <b>users</b> table.</p>
        <pre>                INSERT INTO `users_database`.`user` (`id`, `name`) VALUES ('1', 'Salman');
                INSERT INTO `users_database`.`user` (`id`, `name`) VALUES ('2', 'SRK');
                INSERT INTO `users_database`.`user` (`id`, `name`) VALUES ('3', 'AMIR');
                INSERT INTO `users_database`.`user` (`id`, `name`) VALUES ('4', 'Tiger');
                INSERT INTO `users_database`.`user` (`id`, `name`) VALUES ('5', 'Prabhas');</pre>
        <h2>12. Create a JSP View - users.jsp</h2>
        <p>Let's create a <b>users.jsp</b> view to show the list of users. Locate under <b>webapp/WEB-INF/jsp</b>
            folder.</p>
        <pre><pre>&lt;!DOCTYPE html&gt;
    &lt;%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%&gt;
    &lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%&gt;
    &lt;html lang="en"&gt;
    &lt;head&gt;
    
    &lt;link rel="stylesheet" type="text/css"
     href="webjars/bootstrap/3.3.7/css/bootstrap.min.css" /&gt;
    &lt;c:url value="/css/main.css" var="jstlCss" /&gt;
    &lt;link href="${jstlCss}" rel="stylesheet" /&gt;
    
    &lt;/head&gt;
    &lt;body&gt;
     &lt;div class="container"&gt;
      &lt;header&gt;
       &lt;h1&gt;Spring MVC + JSP + JPA + Spring Boot 2&lt;/h1&gt;
      &lt;/header&gt;
      &lt;div class="starter-template"&gt;
       &lt;h1&gt;Users List&lt;/h1&gt;
       &lt;table
        class="table table-striped table-hover table-condensed table-bordered"&gt;
        &lt;tr&gt;
         &lt;th&gt;Id&lt;/th&gt;
         &lt;th&gt;Name&lt;/th&gt;
        &lt;/tr&gt;
        &lt;c:forEach var="user" items="${users}"&gt;
         &lt;tr&gt;
          &lt;td&gt;${user.id}&lt;/td&gt;
          &lt;td&gt;${user.name}&lt;/td&gt;
         &lt;/tr&gt;
        &lt;/c:forEach&gt;
       &lt;/table&gt;
      &lt;/div&gt;
    
     &lt;/div&gt;
    
     &lt;script type="text/javascript"
      src="webjars/bootstrap/3.3.7/js/bootstrap.min.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
    
    &lt;/html&gt;</pre>
        </pre>
        <h2>13. Running the Application</h2>
<p>Now run <b>Springboot2WebappJspApplication.java</b> as a Java application. </p>
  <p> <b>http://localhost:8080/users </b>hit this URL in a browser. You will see below HTML page on the screen:</p>
<img src="/assets/spring-mvc-image/springboot-jsp-users-html.PNG" alt="" class="image-fluid">



    </div>
</body>

</html>
